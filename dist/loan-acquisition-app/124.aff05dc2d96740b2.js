"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[124],{3124:(E,u,n)=>{n.r(u),n.d(u,{UserFormComponent:()=>b});var l=n(177),s=n(4341),e=n(4438),f=n(6557),d=n(7681);function c(i,a){1&i&&(e.j41(0,"div",17),e.EFF(1," Full Name is required "),e.k0s())}function p(i,a){1&i&&(e.j41(0,"div",17),e.EFF(1," Valid email is required "),e.k0s())}function F(i,a){1&i&&(e.j41(0,"div",17),e.EFF(1," Phone Number is required "),e.k0s())}function h(i,a){if(1&i&&(e.j41(0,"option",18),e.EFF(1),e.k0s()),2&i){const o=a.$implicit;e.Y8G("value",o.roleId),e.R7$(),e.SpI(" ",o.roleName," ")}}function v(i,a){1&i&&(e.j41(0,"div",17),e.EFF(1," Role is required "),e.k0s())}let b=(()=>{class i{constructor(o,t,r,m){this.formBuilder=o,this.userManagementService=t,this.route=r,this.router=m,this.submitted=!1,this.isEditMode=!1,this.roles=[],this.userForm=this.formBuilder.group({fullName:["",s.k0.required],email:["",[s.k0.required,s.k0.email]],phoneNumber:["",s.k0.required],role:["",s.k0.required]})}ngOnInit(){this.loadRoles();const o=this.route.snapshot.paramMap.get("id");o&&(this.isEditMode=!0,this.loadUser(parseInt(o,10)))}loadRoles(){this.userManagementService.getRoles().subscribe(o=>{this.roles=o},o=>console.error("Error loading roles:",o))}loadUser(o){this.userManagementService.getUserById(o).subscribe({next:t=>{t&&this.userForm.patchValue({fullName:t.fullName,email:t.email,phoneNumber:t.phoneNumber,role:t.role})},error:t=>{console.error("Error loading user:",t),this.router.navigate(["/admin/users"])}})}get f(){return this.userForm.controls}onSubmit(){if(this.submitted=!0,this.userForm.invalid)return;const o=this.route.snapshot.paramMap.get("id"),t=this.userForm.value;this.isEditMode&&o?this.userManagementService.updateUser(parseInt(o,10),t).subscribe({next:()=>this.router.navigate(["/admin/users"]),error:r=>console.error("Error updating user:",r)}):this.userManagementService.createUser(t).subscribe({next:()=>this.router.navigate(["/admin/users"]),error:r=>console.error("Error creating user:",r)})}onCancel(){this.router.navigate(["/admin/users"])}static{this.\u0275fac=function(t){return new(t||i)(e.rXU(s.ok),e.rXU(f.G),e.rXU(d.nX),e.rXU(d.Ix))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-user-form"]],standalone:!0,features:[e.aNF],decls:35,vars:8,consts:[[1,"container-fluid"],[1,"card"],[1,"card-header"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"form-label"],["type","text","formControlName","fullName",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["type","email","formControlName","email",1,"form-control"],["type","text","formControlName","phoneNumber",1,"form-control"],["formControlName","roleId",1,"form-select"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"d-flex","gap-2"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"invalid-feedback"],[3,"value"]],template:function(t,r){1&t&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),e.EFF(4),e.k0s()(),e.j41(5,"div",3)(6,"form",4),e.bIt("ngSubmit",function(){return r.onSubmit()}),e.j41(7,"div",5)(8,"label",6),e.EFF(9,"Full Name"),e.k0s(),e.nrm(10,"input",7),e.DNE(11,c,2,0,"div",8),e.k0s(),e.j41(12,"div",5)(13,"label",6),e.EFF(14,"Email"),e.k0s(),e.nrm(15,"input",9),e.DNE(16,p,2,0,"div",8),e.k0s(),e.j41(17,"div",5)(18,"label",6),e.EFF(19,"Phone Number"),e.k0s(),e.nrm(20,"input",10),e.DNE(21,F,2,0,"div",8),e.k0s(),e.j41(22,"div",5)(23,"label",6),e.EFF(24,"User Role"),e.k0s(),e.j41(25,"select",11)(26,"option",12),e.EFF(27,"Select role"),e.k0s(),e.DNE(28,h,2,2,"option",13),e.k0s(),e.DNE(29,v,2,0,"div",8),e.k0s(),e.j41(30,"div",14)(31,"button",15),e.EFF(32),e.k0s(),e.j41(33,"button",16),e.bIt("click",function(){return r.onCancel()}),e.EFF(34," Cancel "),e.k0s()()()()()()),2&t&&(e.R7$(4),e.JRh(r.isEditMode?"Edit User":"Add New User"),e.R7$(2),e.Y8G("formGroup",r.userForm),e.R7$(5),e.Y8G("ngIf",r.submitted&&r.f.fullName.errors),e.R7$(5),e.Y8G("ngIf",r.submitted&&r.f.email.errors),e.R7$(5),e.Y8G("ngIf",r.submitted&&r.f.phoneNumber.errors),e.R7$(7),e.Y8G("ngForOf",r.roles),e.R7$(),e.Y8G("ngIf",r.submitted&&r.f.roleId.errors),e.R7$(3),e.SpI(" ",r.isEditMode?"Update":"Create"," User "))},dependencies:[l.MD,l.Sq,l.bT,s.X1,s.qT,s.xH,s.y7,s.me,s.wz,s.BC,s.cb,s.j4,s.JD],encapsulation:2})}}return i})()}}]);